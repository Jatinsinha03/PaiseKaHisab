<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SIP Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>
<body class="bg-gray-900 flex flex-col min-h-screen">
    <header class="text-2xl font-serif mb-4 mt-4 flex justify-center text-center text-white">
      SIP Calculator
    </header>
    <main class="flex-1 p-4">
        <div class="max-w-md mx-auto bg-none p-7 border border-gray-300 rounded-lg text-white">
            <div>
                <label for="monthlyInvestment" class="block font-medium ">Monthly Investment:</label>
                <input type="number" id="monthlyInvestment" class="p-2 border border-gray-300 rounded w-full text-black" placeholder="Enter monthly amount">
            </div>
            <div class="mt-4">
                <label for="annualReturn" class="block font-medium">Annual Return Rate (%):</label>
                <input type="number" id="annualReturn" class="p-2 border border-gray-300 rounded w-full text-black" placeholder="Expected annual return rate">
            </div>
            <div class="mt-4 mb-6">
                <label for="timePeriod" class="block font-medium">Investment Period (years):</label>
                <input type="number" id="timePeriod" class="p-2 border border-gray-300 rounded w-full text-black" placeholder="Number of years">
            </div>
            <button onclick="calculateSIP()" class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Calculate
            </button>
            <div id="result" class="mt-6 text-center"></div>
            <canvas id="sipGraph" class="mt-4"></canvas>
        </div>
    </main><br><br>
    <!-- Bottom Nav for Mobile -->
    <nav class="fixed bottom-0 left-0 right-0 bg-gray-800 z-50">
        <div class="flex justify-around items-center p-2">
          <a href="home.html" class="text-gray-400 flex flex-col items-center"
            ><i class="fa-solid fa-house p-2"></i>
            <span class="text-xs">Home</span>
          </a>
          <a href="loan.html" class="text-gray-400 flex flex-col items-center">
            <i class="fa-solid fa-landmark p-2"></i>
            <span class="text-xs">Lend</span>
          </a>
          <a href="expence.html" class="text-gray-400 flex flex-col items-center"
            ><i class="fa-solid fa-money-check-dollar p-2"></i>
            <span class="text-xs">Expenses</span>
          </a>
          <a href="savings.html" class="text-gray-400 flex flex-col items-center">
            <i class="fa-solid fa-piggy-bank p-2"></i>
            <span class="text-xs">Savings</span>
          </a>
          <a href="bills.html" class="text-gray-400 flex flex-col items-center">
           
            <i class="fa-solid fa-file-invoice-dollar p-2"></i>
         
            <span class="text-xs">Bills</span>
          </a>
          <a href="sip.html" class="text-green-400 flex flex-col items-center">
         
            <i class="fa-solid fa-arrow-up-right-dots p-2"></i>
         
            <span class="text-xs">SIP Calculator</span>
          </a>
          <a href="profile.html" class="text-gray-400 flex flex-col items-center">
         
            <i class="fa-solid fa-user p-2"></i>
         
            <span class="text-xs">Profile</span>
          </a>
          
          
        </div>  
      </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    resetInputs(); // Reset inputs on page load
    calculateSIP(); // Initial calculation on load (or you can choose not to call this)
});

function resetInputs() {
    document.getElementById('monthlyInvestment').value = 0;
    document.getElementById('annualReturn').value = 0;
    document.getElementById('timePeriod').value = 0;
    document.getElementById('result').innerHTML = '';
    if (window.bar) {
        window.bar.destroy();
    }
}

function calculateSIP() {
    let p = parseFloat(document.getElementById('monthlyInvestment').value);
    let r = parseFloat(document.getElementById('annualReturn').value) / 12 / 100;
    let n = parseFloat(document.getElementById('timePeriod').value) * 12;

    if (p === 0 || r === 0 || n === 0) {
        document.getElementById('result').innerHTML = 'Please enter all fields to calculate the SIP';
        return; // Early return if any field is zero
    }

    let amount = p * ((Math.pow(1 + r, n) - 1) / r) * (1 + r);
    let invest = p * n;
    let values = [];
    let cumulativeValue = 0;

    for (let i = 1; i <= n; i++) {
        cumulativeValue = p * ((Math.pow(1 + r, i) - 1) / r) * (1 + r);
        values.push({ month: i, value: cumulativeValue });
    }

    let ctx = document.getElementById('sipGraph').getContext('2d');
    if (window.bar != undefined) {
        window.bar.destroy(); // Ensure the old graph is cleared before drawing a new one
    }
    window.bar = new Chart(ctx, {
        type: 'line',
        data: {
            labels: values.map(x => `Month ${x.month}`),
            datasets: [{
                label: 'Future Value of SIP Investments',
                data: values.map(x => x.value),
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    document.getElementById('result').innerHTML = `Total Investment: ${invest.toLocaleString()}<br>Future Value: ${amount.toLocaleString('en-IN', { maximumFractionDigits: 2 })}`;
}
    </script>
</body>
</html>
